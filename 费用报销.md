# 费用报销 接口文档 v2019.03.28
wingmfc 1.0.0_0
2019-03-28 11:40:00
## 描述
```
费用报销接口
```
## 规范说明
```
接口地址
http://192.168.0.145:8089
swagger
http://192.168.0.145:8089/swagger-ui.html
```
## 目录
```
```
## 1 新增费用报销
### 请求
POST /office/reimbursement
```JSON
{
  "approverId": "审批人id,必须",
  "cashierId": "出纳id,必须",
  "checkerId": "审核人id,必须",
  "copyToIds": [
    "抄送人id,零或多个"
  ],
  "photoList": [
    "图片"
  ],
  "reimbursementItemDTOList": [
    {
      "amount": "报销明细金额",
      "category": "报销类别",
      "detail": "话详细说明"
    }
  ]
}
```
### 响应
### 响应状态
```
200 OK
201 Created
401 Unauthorized
403 Forbidden
404 Not Found
```
## 2 审批
### 请求
POST /office/reimbursement/doApprove
```JSON
{
  "id": "需要审批的报销id,必须",
 "approveStatus": "审批结果,通过审批:APPROVED;驳回审批:REJECTED,必须",
 "note":"驳回原因,驳回时必须"
}
```
### 响应
### 响应状态
```
200 OK
201 Created
401 Unauthorized
403 Forbidden
404 Not Found
```
## 3 获取待我审批/我审批的
### 请求
POST /office/reimbursement/getApprove
```JSON
{
 "approveStatus":"审批状态:未审批:UNAPPROVED;已审批:APPROVED,必须"
}
```
### 响应
```JSON
[
  {
    "id": "报销id",
    "createTime": "创建时间",
    "reimbursementItemDTOList": [
      {
        "id": "明细id",
        "createTime": "创建时间",
        "amount": "金额",
        "category": "类别",
        "detail": "详情"
      }
    ],
    "amount": "报销总金额",
    "reimbursePersonId": "报销人id",
    "reimbursePersonName": "报销人名字",
    "reimbursePersonAvatar": "报销人头像"
  }
]
```
## 4 获取抄送给我的
GET /office/reimbursement/getCopyToMe
### 响应
```JSON
[
  {
    "id": "4028e38169c80eb20169c81037a10000,id",
    "createTime": "2019-03-29 14:08:20",
    "reimbursementItemDTOList": [
      {
        "id": "4028e38169c80eb20169c81037ce0001,明细id",
        "createTime": "2019-03-29 14:08:20",
        "amount": 100,
        "category": "交通报销",
        "detail": "车费:100"
      },
      {
        "id": "4028e38169c80eb20169c81037ce0002",
        "createTime": "2019-03-29 14:08:20",
        "amount": 500,
        "category": "通信报销",
        "detail": "话费:500"
      }
    ],
    "amount": 600,
    "photoList": [
      "/imgs/x.png",
      "/imgs/y.png"
    ],
    "reimbursePersonId": "402880086950ab4c016950b1a4460002",
    "reimbursePersonName": "管理员",
    "checkerId": "402880086950ab4c016950b1a4460002",
    "checkerName": "管理员",
    "approverId": "402880086950ab4c016950b1a4460002",
    "approverName": "管理员",
    "cashierId": "402880086950ab4c016950b1a4460002",
    "cashierName": "管理员",
    "reimbursementProcessDTOList": [
      {
        "id": "4028e38169c80eb20169c81037e00003",
        "createTime": "2019-03-29 14:08:20",
        "reimbursementId": null,
        "approverId": "402880086950ab4c016950b1a4460002",
        "approverName": null,
        "approverAvatar": null,
        "approveTime": "2019-03-29 16:21:02",
        "approveStatus": "APPROVED",
        "note": null,
        "approveType": "CASH",
        "nextReimbursementProcessId": null
      },
      {
        "id": "4028e38169c80eb20169c81037e10004",
        "createTime": "2019-03-29 14:08:20",
        "reimbursementId": null,
        "approverId": "402880086950ab4c016950b1a4460002",
        "approverName": null,
        "approverAvatar": null,
        "approveTime": "2019-03-29 16:21:02",
        "approveStatus": "APPROVED",
        "note": null,
        "approveType": "APPROVE",
        "nextReimbursementProcessId": "4028e38169c80eb20169c81037e00003"
      },
      {
        "id": "4028e38169c80eb20169c81037e10005",
        "createTime": "2019-03-29 14:08:20",
        "reimbursementId": null,
        "approverId": "402880086950ab4c016950b1a4460002",
        "approverName": null,
        "approverAvatar": null,
        "approveTime": "2019-03-29 16:21:02",
        "approveStatus": "APPROVED",
        "note": null,
        "approveType": "CHECK",
        "nextReimbursementProcessId": "4028e38169c80eb20169c81037e10004"
      }
    ],
    "reimbursementProcessDTO": null,
    "copyToIds": null,
    "copyToId": null,
    "copyToWho": [
      {
        "name": "管理员",
        "avatar": null,
        "id": "402880086950ab4c016950b1a4460002",
        "smallAvatar": "https://sanfanerp-public.oss-cn-shenzhen.aliyuncs.com/default/avatar.png"
      },
      {
        "name": "Sdsd",
        "avatar": null,
        "id": "4028800869525e960169557a35920000",
        "smallAvatar": "https://sanfanerp-public.oss-cn-shenzhen.aliyuncs.com/default/avatar.png"
      }
    ],
    "companyId": "402880086951cc28016951d35f140000",
    "reimburseStatus": "PASSED",
    "approveStatus": null,
    "note": null
  }
]
```
## 5 获取我的报销
GET /office/reimbursement/getMine
### 响应
```JSON
[
  {
    "id": "4028e38169c80eb20169c81037a10000,id",
    "createTime": "2019-03-29 14:08:20",
    "reimbursementItemDTOList": [
      {
        "id": "4028e38169c80eb20169c81037ce0001,明细id",
        "createTime": "2019-03-29 14:08:20",
        "amount": 100,
        "category": "交通报销",
        "detail": "车费:100"
      },
      {
        "id": "4028e38169c80eb20169c81037ce0002",
        "createTime": "2019-03-29 14:08:20",
        "amount": 500,
        "category": "通信报销",
        "detail": "话费:500"
      }
    ],
    "amount": 600,
    "photoList": [
      "/imgs/x.png",
      "/imgs/y.png"
    ],
    "reimbursePersonId": "402880086950ab4c016950b1a4460002",
    "reimbursePersonName": "管理员",
    "checkerId": "402880086950ab4c016950b1a4460002",
    "checkerName": "管理员",
    "approverId": "402880086950ab4c016950b1a4460002",
    "approverName": "管理员",
    "cashierId": "402880086950ab4c016950b1a4460002",
    "cashierName": "管理员",
    "reimbursementProcessDTOList": [
      {
        "id": "4028e38169c80eb20169c81037e00003",
        "createTime": "2019-03-29 14:08:20",
        "reimbursementId": null,
        "approverId": "402880086950ab4c016950b1a4460002",
        "approverName": null,
        "approverAvatar": null,
        "approveTime": "2019-03-29 16:21:02",
        "approveStatus": "APPROVED",
        "note": null,
        "approveType": "CASH",
        "nextReimbursementProcessId": null
      },
      {
        "id": "4028e38169c80eb20169c81037e10004",
        "createTime": "2019-03-29 14:08:20",
        "reimbursementId": null,
        "approverId": "402880086950ab4c016950b1a4460002",
        "approverName": null,
        "approverAvatar": null,
        "approveTime": "2019-03-29 16:21:02",
        "approveStatus": "APPROVED",
        "note": null,
        "approveType": "APPROVE",
        "nextReimbursementProcessId": "4028e38169c80eb20169c81037e00003"
      },
      {
        "id": "4028e38169c80eb20169c81037e10005",
        "createTime": "2019-03-29 14:08:20",
        "reimbursementId": null,
        "approverId": "402880086950ab4c016950b1a4460002",
        "approverName": null,
        "approverAvatar": null,
        "approveTime": "2019-03-29 16:21:02",
        "approveStatus": "APPROVED",
        "note": null,
        "approveType": "CHECK",
        "nextReimbursementProcessId": "4028e38169c80eb20169c81037e10004"
      }
    ],
    "reimbursementProcessDTO": null,
    "copyToIds": null,
    "copyToId": null,
    "copyToWho": [
      {
        "name": "管理员",
        "avatar": null,
        "id": "402880086950ab4c016950b1a4460002",
        "smallAvatar": "https://sanfanerp-public.oss-cn-shenzhen.aliyuncs.com/default/avatar.png"
      },
      {
        "name": "Sdsd",
        "avatar": null,
        "id": "4028800869525e960169557a35920000",
        "smallAvatar": "https://sanfanerp-public.oss-cn-shenzhen.aliyuncs.com/default/avatar.png"
      }
    ],
    "companyId": "402880086951cc28016951d35f140000",
    "reimburseStatus": "PASSED",
    "approveStatus": null,
    "note": null
  }
]
```
## 6 撤回报销
### 请求
DELETE /office/reimbursement/{id}
```
id,必须
```
### 响应
### 响应状态
```
200 OK
204 No Content
401 Unauthorized
403 Forbidden
```
## 7 获取报销详情
### 请求
GET /office/reimbursement/{id}
```
id,必须
```
### 响应
```
{
  "id": "报销id",
  "createTime": "创建时间",
  "reimbursementItemDTOList": [
    {
      "id": "报销明细id",
      "amount": "金额",
      "category": "报销类别",
      "detail": "详细说明"
    }
  ],
  "amount": "所有明细的总金额",
  "photoList": [
    "图片"
  ],
  "reimbursePersonId": "报销人id",
  "reimbursePersonName": "报销人名称",
  "reimbursePersonAvatar": "报销人头像",
  "checkerId": "审核人id",
  "checkerName": "审核人名称",
  "checkerAvatar": "审核人头像",
  "approverId": "审批人id",
  "approverName": "审批人名称",
  "approverAvatar": "审批人头像",
  "cashierId": "出纳id",
  "cashierName": "出纳名称",
  "cashierAvatar": "出纳头像",
  "reimbursementProcessDTOList": [
    {
      "id": "审批流程id",
      "createTime": "2019-04-01 16:44:16",
      "reimbursementId": null,
      "approverId": "402880086950ab4c016950b1a4460002",
      "approverName": null,
      "approverAvatar": null,
      "approveTime": null,
      "approveStatus": "UNAPPROVED",
      "note": null,
      "approveType": "出纳:CASH,审批:APPROVE,审核:CHECK",
      "nextReimbursementProcessId": null
    }
  ],
  "reimbursementProcessDTO": null,
  "copyToIds": null,
  "copyToId": null,
  "copyToWho": [
    {
      "id": "4028e38169d80f5b0169d8120ffb0001",
      "createTime": "2019-04-01 16:44:16",
      "reimbursementId": null,
      "employeeId": "402880086950ab4c016950b1a4460002",
      "employeeName": "管理员",
      "employeeAvatar": "https://sanfan-public.oss-cn-hangzhou.aliyuncs.com/default/avatar.png",
      "readStatus": "UNREAD"
    }
  ],
  "companyId": "402880086951cc28016951d35f140000",
  "reimburseStatus": "UNDERWAY",
  "approveStatus": "UNAPPROVED",
  "note": null
}
```
### 响应状态
```
401 Unauthorized
403 Forbidden
404 Not Found
```